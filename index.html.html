<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Verification - TicketLah</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .verified-badge {
            background: #4CAF50;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .verified-badge::before {
            content: "âœ“";
            background: white;
            color: #4CAF50;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }

        .invalid-badge {
            background: #f44336;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .invalid-badge::before {
            content: "âœ•";
            background: white;
            color: #f44336;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }

        .ticket-details {
            padding: 30px 20px;
        }

        .event-title {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #888;
            font-size: 14px;
            font-weight: 500;
        }

        .detail-value {
            color: #333;
            font-size: 14px;
            font-weight: 600;
            text-align: right;
            max-width: 60%;
            word-wrap: break-word;
        }

        .footer {
            background: #f8f8f8;
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 12px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .error-message {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 15px;
            margin: 20px;
            border-radius: 8px;
            text-align: center;
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 24px;
            }

            .event-title {
                font-size: 18px;
            }

            .detail-value {
                max-width: 55%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ðŸŽ« TicketLah</div>
            <h1>Ticket Verification</h1>
            <p>Secure Entry Pass</p>
        </div>

        <div id="statusBadge">
            <!-- Badge will be added by JavaScript -->
        </div>

        <div class="ticket-details" id="ticketDetails">
            <!-- Details will be populated by JavaScript -->
        </div>

        <div class="footer">
            <p id="footerText">Verifying ticket authenticity...</p>
            <p style="margin-top: 5px; opacity: 0.7;">Â© 2026 TicketLah. All rights reserved.</p>
        </div>
    </div>

    <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Get all ticket details from URL
        const ticketData = {
            eventName: getUrlParameter('eventName'),
            artist: getUrlParameter('artist'),
            date: getUrlParameter('date'),
            venue: getUrlParameter('venue'),
            category: getUrlParameter('category'),
            section: getUrlParameter('section'),
            quantity: getUrlParameter('quantity'),
            price: getUrlParameter('price'),
            email: getUrlParameter('email'),
            bookingId: getUrlParameter('bookingId')
        };

        // Display ticket details
        const detailsContainer = document.getElementById('ticketDetails');
        const statusBadge = document.getElementById('statusBadge');
        const footerText = document.getElementById('footerText');

        if (ticketData.eventName) {
            // Show VERIFIED badge
            statusBadge.className = 'verified-badge';
            statusBadge.innerHTML = 'VERIFIED TICKET';
            footerText.textContent = 'This ticket has been verified for authenticity';

            // Event Title
            const eventTitle = document.createElement('div');
            eventTitle.className = 'event-title';
            eventTitle.textContent = ticketData.eventName;
            detailsContainer.appendChild(eventTitle);

            // Helper function to create detail rows
            function createDetailRow(label, value) {
                if (value) {
                    const row = document.createElement('div');
                    row.className = 'detail-row';
                    
                    const labelDiv = document.createElement('div');
                    labelDiv.className = 'detail-label';
                    labelDiv.textContent = label;
                    
                    const valueDiv = document.createElement('div');
                    valueDiv.className = 'detail-value';
                    valueDiv.textContent = value;
                    
                    row.appendChild(labelDiv);
                    row.appendChild(valueDiv);
                    detailsContainer.appendChild(row);
                }
            }

            // Add all details
            createDetailRow('Artist', ticketData.artist);
            createDetailRow('Date', ticketData.date);
            createDetailRow('Venue', ticketData.venue);
            createDetailRow('Category', ticketData.category);
            createDetailRow('Section', ticketData.section);
            createDetailRow('Quantity', ticketData.quantity);
            createDetailRow('Email', ticketData.email);

            // Price row with special styling
            if (ticketData.price) {
                const priceRow = document.createElement('div');
                priceRow.className = 'detail-row';
                priceRow.style.marginTop = '15px';
                priceRow.style.paddingTop = '15px';
                priceRow.style.borderTop = '2px solid #f0f0f0';
                
                const priceLabel = document.createElement('div');
                priceLabel.className = 'detail-label';
                priceLabel.textContent = 'Price per Ticket';
                priceLabel.style.fontSize = '15px';
                priceLabel.style.fontWeight = 'bold';
                priceLabel.style.color = '#333';
                
                const priceValue = document.createElement('div');
                priceValue.className = 'detail-value';
                priceValue.textContent = 'S$ ' + parseFloat(ticketData.price).toFixed(2);
                priceValue.style.fontSize = '16px';
                priceValue.style.color = '#667eea';
                priceValue.style.fontWeight = 'bold';
                
                priceRow.appendChild(priceLabel);
                priceRow.appendChild(priceValue);
                detailsContainer.appendChild(priceRow);
            }

            // Total price if quantity > 1
            if (ticketData.quantity && ticketData.price) {
                const total = parseFloat(ticketData.price) * parseInt(ticketData.quantity);
                const totalRow = document.createElement('div');
                totalRow.className = 'detail-row';
                
                const totalLabel = document.createElement('div');
                totalLabel.className = 'detail-label';
                totalLabel.textContent = 'Total Amount';
                totalLabel.style.fontSize = '16px';
                totalLabel.style.fontWeight = 'bold';
                totalLabel.style.color = '#333';
                
                const totalValue = document.createElement('div');
                totalValue.className = 'detail-value';
                totalValue.textContent = 'S$ ' + total.toFixed(2);
                totalValue.style.fontSize = '18px';
                totalValue.style.color = '#4CAF50';
                totalValue.style.fontWeight = 'bold';
                
                totalRow.appendChild(totalLabel);
                totalRow.appendChild(totalValue);
                detailsContainer.appendChild(totalRow);
            }

            // Booking ID at the bottom
            if (ticketData.bookingId) {
                const bookingRow = document.createElement('div');
                bookingRow.style.marginTop = '20px';
                bookingRow.style.paddingTop = '15px';
                bookingRow.style.borderTop = '2px solid #f0f0f0';
                bookingRow.style.textAlign = 'center';
                bookingRow.style.fontSize = '11px';
                bookingRow.style.color = '#999';
                bookingRow.textContent = 'Booking ID: ' + ticketData.bookingId;
                detailsContainer.appendChild(bookingRow);
            }

        } else {
            // Show INVALID badge
            statusBadge.className = 'invalid-badge';
            statusBadge.innerHTML = 'INVALID TICKET';
            footerText.textContent = 'This ticket could not be verified';
            
            // Show error if no data
            detailsContainer.innerHTML = `
                <div class="error-message">
                    <strong>Invalid QR Code</strong><br>
                    This QR code does not contain valid ticket information.
                </div>
            `;
        }
    </script>
</body>
</html>